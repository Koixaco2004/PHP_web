@import "tailwindcss/base";
@import "tailwindcss/components";
@import "tailwindcss/utilities";

/* Import Google Fonts */
@import url("https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700;800&display=swap");

/* Custom base styles */
@layer base {
    html {
        scroll-behavior: smooth;
    }

    body {
        font-family: "Be Vietnam Pro", ui-sans-serif, system-ui, sans-serif;
        line-height: 1.6;
        color: #1e293b;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: "Be Vietnam Pro", ui-sans-serif, system-ui, sans-serif;
        font-weight: 600;
        line-height: 1.2;
    }
}

/* Make site header logo smaller (targets common logo file and classes) */
header img[src$="logo.png"],
img[src$="logo.png"].site-logo,
.logo img,
.brand img {
    height: 28px !important;
    width: auto !important;
    display: inline-block !important;
}

/* Slightly smaller logo on mobile */
@media (max-width: 767px) {
    header img[src$="logo.png"],
    img[src$="logo.png"].site-logo,
    .logo img,
    .brand img {
        height: 22px !important;
    }
}

/* Force-hide any element that triggers the mobile nav toggle (hamburger) globally */
[onclick="toggleMobileNav()"],
[onclick="toggleMobileNav()"] * {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
    width: 0 !important;
    height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    background: transparent !important;
}

/* Custom component classes */
@layer components {
    .btn-primary {
        @apply inline-flex items-center justify-center px-6 py-3 bg-primary-900 text-white font-semibold rounded-lg hover:bg-primary-800 focus:ring-2 focus:ring-primary-700 focus:ring-offset-2 transition-all duration-200 shadow-sm;
    }

    .btn-primary.dark {
        @apply bg-primary-100-dark text-primary-900-dark hover:bg-primary-200-dark focus:ring-primary-300-dark;
    }

    .btn-secondary {
        @apply inline-flex items-center justify-center px-6 py-3 bg-white text-primary-900 font-semibold rounded-lg hover:bg-primary-50 focus:ring-2 focus:ring-primary-700 focus:ring-offset-2 transition-all duration-200 border border-primary-200;
    }

    .btn-secondary.dark {
        @apply bg-primary-900-dark text-primary-100-dark hover:bg-primary-800-dark border-primary-700-dark focus:ring-primary-400-dark;
    }

    /* Dark mode specific components */
    .dark-mode-toggle {
        @apply p-2 rounded-lg transition-all duration-200;
    }

    .dark-mode-toggle:hover {
        @apply bg-primary-100 dark:bg-primary-800-dark;
    }

    .dark-mode-toggle.active {
        @apply bg-primary-200 dark:bg-primary-700-dark;
    }

    /* Fix search bar alignment */
    header .flex.items-center.justify-between {
        align-items: center !important;
    }

    header input[name="search"] {
        vertical-align: middle !important;
        line-height: 1 !important;
        margin: 0 !important;
        margin-bottom: 0 !important;
    }

    header form {
        margin: 0 !important;
        margin-bottom: 0 !important;
    }

    .categories-dropdown {
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        border: 1px solid #e5e7eb;
    }

    .categories-dropdown.dark {
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        border: 1px solid #374151;
    }

    .category-item {
        transition: all 0.15s ease;
    }

    .category-item:hover {
        background-color: #f3f4f6;
        transform: translateX(2px);
    }

    .category-item.dark:hover {
        background-color: #374151;
    }

    /* Scroll to Top Button */
    .scroll-to-top-btn {
        @apply fixed bottom-8 right-8 z-50 p-4 bg-green-500 text-white rounded-full shadow-lg cursor-pointer transition-all duration-300 ease-in-out;
        opacity: 0;
        transform: translateY(100px) scale(0.8);
    }

    .scroll-to-top-btn.show {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    .scroll-to-top-btn:hover {
        @apply bg-green-600 shadow-xl;
        transform: translateY(-4px) scale(1.05);
    }

    .scroll-to-top-btn:active,
    .scroll-to-top-btn.clicked {
        transform: translateY(0) scale(0.95);
    }

    .scroll-to-top-btn:focus {
        @apply outline-none ring-4 ring-green-300;
    }

    /* Dark mode support */
    .dark .scroll-to-top-btn {
        @apply bg-green-600 shadow-2xl;
    }

    .dark .scroll-to-top-btn:hover {
        @apply bg-green-500;
    }

    .dark .scroll-to-top-btn:focus {
        @apply ring-green-400;
    }

    /* Mobile responsive */
    @media (max-width: 640px) {
        .scroll-to-top-btn {
            @apply bottom-6 right-6 p-3;
        }
    }

    /* Animation for button appearance */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .scroll-to-top-btn.show {
        animation: fadeInUp 0.3s ease-out;
    }
}

/* Custom utilities */
@layer utilities {
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
}

/* Custom Scrollbar for entire application */
* {
    scrollbar-width: thin;
    scrollbar-color: #22c55e #f1f5f9;
}

*::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

*::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 10px;
}

*::-webkit-scrollbar-thumb {
    background: #22c55e;
    border-radius: 10px;
}

*::-webkit-scrollbar-thumb:hover {
    background: #16a34a;
}

/* Dark mode scrollbar */
.dark * {
    scrollbar-color: #22c55e #374151;
}

.dark *::-webkit-scrollbar-track {
    background: #374151;
}

.dark *::-webkit-scrollbar-thumb {
    background: #22c55e;
}

.dark *::-webkit-scrollbar-thumb:hover {
    background: #22c55e;
}

.notification-icon {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Toast Animation */
@keyframes slide-in-right {
    from {
        transform: translateX(100%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

.animate-slide-in-right {
    animation: slide-in-right 0.3s ease-out;
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
}

/* Comment/Reply animations */
@keyframes fade-out {
    from {
        opacity: 1;
        transform: scale(1);
    }

    to {
        opacity: 0;
        transform: scale(0.95);
    }
}

.comment-deleting {
    animation: fade-out 0.3s ease-out forwards;
}

.comment-item,
[data-reply-id] {
    transition: all 0.3s ease;
}

/* Mobile-only: thin white draggable bar under the main nav (CSS-only, does not modify Blade) */
@media (max-width: 767px) {
    /* Target the nav container that holds the links. This selector is specific and only applies on small screens. */
    nav .px-8 .flex.items-center.space-x-8,
    nav > div > .flex.items-center.space-x-8 {
        overflow-x: auto;
        /* allow vertical overflow so absolute dropdowns won't be clipped */
        overflow-y: visible !important;
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
        /* do NOT add extra padding/margin that shifts layout or creates visible bars */
        padding-bottom: 0;
        margin-bottom: 0;
    }

    /* Hide scrollbars for the main nav on mobile but keep overflow for touch scrolling */
    nav .px-8 .flex.items-center.space-x-8,
    nav > div > .flex.items-center.space-x-8 {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        overflow-y: hidden;
        scroll-behavior: smooth;
        /* hide all scrollbars while preserving touch/drag scrolling */
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
    }

    nav .px-8 .flex.items-center.space-x-8::-webkit-scrollbar,
    nav > div > .flex.items-center.space-x-8::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Opera */
        height: 0;
    }

    /* Also hide scrollbars inside the categories dropdown */
    nav .categories-dropdown,
    nav .categories-dropdown * {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    nav .categories-dropdown::-webkit-scrollbar {
        display: none;
    }
}

/* Mobile: show categories dropdown as an overlay card under the button (like desktop) */
@media (max-width: 767px) {
    /* Target the dropdown when placed inside a .relative wrapper (as in the layout) */
    /* Use fixed positioning on mobile so the dropdown is never clipped by scroll containers
       and will appear visually above page content (keeps desktop/JS behavior unchanged). */
    nav .relative > #categoriesDropdown,
    nav .relative > .categories-dropdown {
        position: fixed !important;
        top: 115px !important; /* offset below header/nav - moved down slightly */
        left: 1rem !important;
        right: 1rem !important;
        width: auto !important;
        max-width: none !important;
        margin: 0 auto !important;
        border-radius: 0.5rem !important;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
        border: 1px solid #e5e7eb !important;
        background: #ffffff !important;
        z-index: 9999 !important;
        overflow: visible !important;
    }

    /* Inner list scroll area */
    nav .relative > #categoriesDropdown .py-2,
    nav .relative > .categories-dropdown .py-2 {
        max-height: 260px !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        padding-top: 0.25rem !important;
        padding-bottom: 0.25rem !important;
    }

    /* Category item appearance on mobile card */
    nav .relative > #categoriesDropdown .category-item,
    nav .relative > .categories-dropdown .category-item {
        padding: 0.75rem 0.95rem !important;
        font-size: 0.95rem !important;
        color: #0f172a !important;
    }

    /* Dark mode variations */
    nav .relative > #categoriesDropdown.dark,
    nav .relative > .categories-dropdown.dark {
        background: #111827 !important;
        border-color: #374151 !important;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5) !important;
    }

    nav .relative > #categoriesDropdown.dark .category-item,
    nav .relative > .categories-dropdown.dark .category-item {
        color: #e5e7eb !important;
    }
}

/* Mobile: reduce header / brand text size for better fit on small screens */
@media (max-width: 767px) {
    header .brand,
    header .brand .site-title,
    .brand .site-title,
    .site-title,
    .logo-text,
    .site-name,
    .navbar-brand,
    .header-logo-text {
        font-size: 14px !important;
        line-height: 1 !important;
        letter-spacing: -0.2px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        max-width: 220px !important;
    }

    /* Shrink header logo image on mobile */
    header img[src$="logo.png"],
    img[src$="logo.png"].site-logo,
    .logo img,
    .brand img {
        height: 22px !important;
        width: auto !important;
        display: inline-block !important;
    }

    /* Make dark mode toggle compact and visible on mobile (do not hide) */
    .dark-mode-toggle {
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        width: 36px !important;
        height: 36px !important;
        padding: 4px !important;
        margin: 0 !important;
        border-radius: 8px !important;
        background: transparent !important; /* keep theme styling */
        color: inherit !important;
        box-shadow: none !important;
        pointer-events: auto !important;
        visibility: visible !important;
        opacity: 0.95 !important;
        font-size: 14px !important;
    }

    .dark-mode-toggle svg,
    .dark-mode-toggle i {
        width: 18px !important;
        height: 18px !important;
    }
}

/* Target the actual header title span (e.g. <span class="text-xl">SmurfExpress</span>) and make it smaller on mobile */
@media (max-width: 767px) {
    header .flex.items-center a > span.text-xl,
    header .flex.items-center span.text-xl,
    header a > span.text-xl,
    header .text-xl {
        font-size: 17px !important;
        max-width: 180px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        vertical-align: middle !important;
        line-height: 1 !important;
    }
}

@media (max-width: 420px) {
    header .flex.items-center a > span.text-xl,
    header .flex.items-center span.text-xl,
    header a > span.text-xl,
    header .text-xl {
        font-size: 15px !important;
        max-width: 140px !important;
    }
}

/* Extra-small phones */
@media (max-width: 420px) {
    header .brand,
    header .brand .site-title,
    .brand .site-title,
    .site-title,
    .logo-text,
    .site-name,
    .navbar-brand,
    .header-logo-text {
        font-size: 12px !important;
        max-width: 160px !important;
    }

    header img[src$="logo.png"],
    img[src$="logo.png"].site-logo,
    .logo img,
    .brand img {
        height: 18px !important;
    }

    /* Extra-small phones: make the dark-mode toggle even smaller but still visible */
    .dark-mode-toggle {
        width: 30px !important;
        height: 30px !important;
        padding: 3px !important;
        border-radius: 6px !important;
        font-size: 12px !important;
    }

    .dark-mode-toggle svg,
    .dark-mode-toggle i {
        width: 16px !important;
        height: 16px !important;
    }
}

/* Mobile: keep the 'Đăng nhập' link in header on a single line and slightly smaller */
@media (max-width: 767px) {
    header a[href*="/login"],
    header a[href*="login"] {
        white-space: nowrap !important;
        display: inline-block !important;
        font-size: 14px !important;
        line-height: 1 !important;
        padding: 0 6px !important;
        transform: none !important;
    }

    /* If the login link is inside a container that forces wrapping, make container allow it */
    header .flex.items-center.space-x-6,
    header .flex.items-center {
        flex-wrap: nowrap !important;
        gap: 0.5rem !important;
    }

    /* Make auth group tighter and ensure register is visible */
    header .flex.items-center.space-x-6 {
        /* tighter grouping for auth buttons on mobile */
        transform: translateX(0) !important;
        padding-right: 0 !important;
        gap: 0.125rem !important;
    }

    /* Shrink register button so it fits and don't change its color */
    header a[href*="/register"],
    header a[href*="register"] .btn-primary,
    .btn-primary {
        padding: 5px 8px !important;
        font-size: 13px !important;
        min-width: 0 !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
    }

    /* Keep login compact and on one line */
    header a[href*="/login"],
    header a[href*="login"] {
        white-space: nowrap !important;
        padding: 0 4px !important;
        font-size: 14px !important;
        line-height: 1 !important;
        margin: 0 !important;
    }

    /* Extra small right margin to separate from page edge if needed */
    header a[href*="/register"] {
        margin-right: 4px !important;
    }
}

/* Mobile: keep login / register buttons side-by-side and preserve their colors */
@media (max-width: 767px) {
    /* Ensure the standard button components don't become full-width or stacked */
    header .btn-primary,
    header .btn-secondary,
    nav .btn-primary,
    nav .btn-secondary {
        display: inline-flex !important;
        width: auto !important;
        min-width: 0 !important;
        white-space: nowrap !important;
        align-items: center !important;
        justify-content: center !important;
        vertical-align: middle !important;
        /* Do not change colors or backgrounds here (preserve existing styles) */
    }

    /* Small gap between them when they are adjacent in the DOM */
    header .btn-primary + .btn-secondary,
    header .btn-secondary + .btn-primary,
    nav .btn-primary + .btn-secondary,
    nav .btn-secondary + .btn-primary {
        margin-left: 0.5rem !important;
    }

    /* If there is a wrapper around auth buttons, make it a horizontal flex container */
    header .auth-buttons,
    nav .auth-buttons,
    .header-auth {
        display: flex !important;
        flex-direction: row !important;
        align-items: center !important;
        gap: 0.5rem !important;
    }
}
